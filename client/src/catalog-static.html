<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">

<link rel="import" href="catalog-styles.html">
<link rel="import" href="catalog-syntax-styles.html">
<link rel="import" href="mark-down.html">
<link rel="import" href="page-loading-behavior.html">

<dom-module id="catalog-static">
  <template>
    <style include="catalog-styles"></style>

    <iron-ajax
      id="ajax"
      url="https://web-components-resources.appspot.com/static/[[name]].md"
      handle-as="text"
      loading="{{loading}}"
      last-response="{{_markdown}}"></iron-ajax>

    <h1 class="page-title">[[title]]</h1>
    <div class="main-content static-content">
      <mark-down markdown="[[_markdown]]"></mark-down>
    </div>
  </template>

  <script>
    Polymer({

      is: 'catalog-static',

      behaviors: [window.PageLoadingBehavior],

      properties: {
        name: String,

        title: String,

        visible: {
          type: Boolean,
          observer: '_visibilityChanged',
        },
      },

      _is: function(name, match) {
        return name == match;
      },

      _visibilityChanged: function(visible) {
        if (!visible || !this.name)
          return;

        this.$.ajax.generateRequest();
      },

    });
  </script>
</dom-module>
